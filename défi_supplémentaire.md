---
layout: tutorial_fr
title: D√©fi suppl√©mentaire
dbFile: data/harrypotter_fr.db
---
# D√©fi suppl√©mentaire

<div class="warning">
<p> Le d√©fi suppl√©mentaire n'est pas encore fini mais l'id√©e serait de soit enseigner: <code>JOIN</code> ou bien <code>LIKE</code></p>
</div>

## NOT un sondage normal

Pour un sondage il faudrait que tu ressences toutes les cr√©atures qui ont des poils. En d'autres termes, il faut trouver les cr√©atures o√π la colone _poils\_cr√©ature_ n'est pas _?_. 

<div class="sideNote"><p>Pour filtrer quelque chose qu'on ne veut pas, on peut utiliser la n√©gation: <code class="keyword">NOT</code> ("pas" en fran√ßais) avant la condition.</p></div>

<sql-exercise
  data-question="Quels sont les cr√©atures qui ont des poils?"
  data-comment="En fran√ßais la requ√™te ressemblerait √† 'S√©lectionne le nom des cr√©atures et leur poils/plumes depuis le tableau cr√©atures o√π leurs poils/plumes ne sont pas inconnus"
  success-message="üêâ Bien jou√©!"
  data-default-text="SELECT ...
FROM ...
WHERE ..."
  data-hint="
SELECT nom_cr√©ature, plumes_poils
FROM cr√©atures
WHERE NOT ...=..."
  data-solution="
SELECT nom_cr√©ature, plumes_poils
FROM cr√©atures 
WHERE NOT plumes_poils='?''"
  ></sql-exercise>

<span class="sideNode">
<h3>Conseil de pros</h3>
Au lieu de cliquer sur Run, tu peux taper sur [Shift‚áß]+[Enter‚Üµ] sur ton clavier pour ex√©cuter ta commande.
</span>

## I LIKE SQL

Tu as surement remarqu√© qu'il faut √™tre tr√®s pr√©cis lorsque l'on cherche des donn√©es specifiques avec le signe <code>=</code> (pare exemple, <code> ... WHERE nom = "Minerva McGonagall" AND ...</code>). Mais si on ne connait qu'une partie d'une information on peut utiliser <code class="keyword">LIKE</code>. Cela permet de chercher si le texte est contenu dans le tableau. 

<sql-exercise
  data-question="Par exemple, dans le nom 'Minerva McGonagall' il y a 'Mine' ou 'onaga' ou encore 'McGo'."
  data-comment=""
  data-default-text="SELECT nom
FROM personnages
WHERE nom LIKE '%MIN%'"
  ></sql-exercise>

<div class="sideNote">
On peut cr√©er une condition en remplacant <code>=</code> par <code class="keyword">LIKE</code> et en placant le texte que l'on veut chercher entre <code>"%...%"</code>
</div>

<sql-exercise
  data-question="Affiches toutes les cr√©atures qui contiennent chat dans leur nom"
  data-hint="SELECT *
FROM cr√©atures
WHERE ... LIKE ..."
  data-solution="SELECT *
FROM cr√©atures
WHERE nom_cr√©ature LIKE '%chat%'"
  ></sql-exercise>


## Les bases de donn√©es relationelles

Le vrai avantage d'utiliser une base de donn√©e telle que celle que nous avons utilis√© jusqu'√† pr√©sent est que tu peux lier ces tableaux entre eux! Rappelles-toi du sch√©ma que nous avons vus pr√©c√©dement:

<img src="imgs/HarryPotterDB_fr.png">

On pourrait par exemple, vouloir voir tous les magiciens qui ont un patronyme de type_cr√©ature _Cr√©ature imaginaire_. Toutefois l'attribut type_cr√©ature ne se trouve pas dans le m√™me tableau que les noms des magiciens. La requ√™te suivante ne peut donc pas fonctionner.

<code>SELECT nom FROM personnages WHERE type_cr√©ature='Cr√©ature imaginaire'</code>

L'attribut type_cr√©ature se trouve dans le tableau cr√©atures. Il faut donc lier, ou joindre les deux tableaux gr√¢ce √† la commande <span class="keyword">_JOIN_</span>. Par exemple, si Harry Potter a un Patronus "Cerf", on aimerait que toutes les informations du Cerf soient ajout√©es au tableau personnages. Pour cela on pourrait √©crire quelque chose comme: 

_S√©lectionne tout les attributs de personnages en joignant le tableau cr√©atures tel que le patronus du personnage correpondre au nom de la cr√©ature_

En simplifiant on obtient:

_SELECTIONNE * DE personnages JOINDRE cr√©atures TEL QUE personnages.patronus=cr√©atures.nom_cr√©ature_

En anglais on traduit:

<code> SELECT *
FROM personnages 
JOIN cr√©atures ON personnages.patronus=cr√©atures.nom_cr√©ature</code>

Tu peux maintenant essayer par toi m√™me.

<sql-exercise
  data-question="Joins les tableaux personnages et cr√©atures sur l'attribut patronus = nom_cr√©atures"
  data-comment="Tu peux aussi essayer de filtrer les r√©sultats avec <code>WHERE</code> ou <code>LIMIT</code> comme tu l'as fait pr√©c√©demment."
  data-default-text=""
  data-solution="SELECT *
FROM personnages 
JOIN cr√©atures ON personnages.patronus=cr√©atures.nom_cr√©ature"
  ></sql-exercise>